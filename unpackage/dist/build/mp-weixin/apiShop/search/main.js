(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["apiShop/search/main"],{1174:function(t,a,e){"use strict";e.r(a);var n=e("f825"),r=e.n(n);for(var i in n)"default"!==i&&function(t){e.d(a,t,(function(){return n[t]}))}(i);a["default"]=r.a},"17fc":function(t,a,e){"use strict";var n=e("3f20"),r=e.n(n);r.a},"3f20":function(t,a,e){},"8ee7":function(t,a,e){"use strict";(function(t){e("a2bf");n(e("66fd"));var a=n(e("a123"));function n(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("543d")["createPage"])},"8f94":function(t,a,e){"use strict";var n;e.d(a,"b",(function(){return r})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){return n}));var r=function(){var t=this,a=t.$createElement;t._self._c},i=[]},a123:function(t,a,e){"use strict";e.r(a);var n=e("8f94"),r=e("1174");for(var i in r)"default"!==i&&function(t){e.d(a,t,(function(){return r[t]}))}(i);e("17fc");var s,o=e("f0c5"),c=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"c9f473dc",null,!1,n["a"],s);a["default"]=c.exports},f825:function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("a34a")),r=e("de50");function i(t){return t&&t.__esModule?t:{default:t}}function s(t,a,e,n,r,i,s){try{var o=t[i](s),c=o.value}catch(u){return void e(u)}o.done?a(c):Promise.resolve(c).then(n,r)}function o(t){return function(){var a=this,e=arguments;return new Promise((function(n,r){var i=t.apply(a,e);function o(t){s(i,n,r,o,c,"next",t)}function c(t){s(i,n,r,o,c,"throw",t)}o(void 0)}))}}var c={created:function(){},mounted:function(){this.getHotData(),this.getHistoryData()},onReachBottom:function(){if(this.page=this.page+1,this.page>this.pagetotal)return!1;this.getlistData()},data:function(){return{nowIndex:0,words:"",historyData:[],hotData:[],tipsData:[],listData:[],order:"",isHot:"",isNew:"",activeClass:"",page:1,total_page:1,num:""}},components:{},methods:{goodsDetail:function(a){t.navigateTo({url:"/apiShop/goods/main?id="+a})},cancel:function(){t.navigateBack({delta:1})},clearInput:function(){this.page=1,this.words="",this.listData=[],this.tipsData=[],this.getHistoryData()},inputFocus:function(){this.listData=[],this.tipsearch()},getlistData:function(t){var a=this;return o(n.default.mark((function e(){var i;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,r.searchHelperApi)({keyword:a.words,order:a.order,page:a.page,num:a.num});case 2:i=e.sent,a.total_page=i.data.res.total_page,a.listData=t?i.data.res:a.listData.concat(i.data.res);case 5:case"end":return e.stop()}}),e)})))()},changeTab:function(t){this.nowIndex=t,this.page=1,1==t?(this.order="asc"==this.order?"desc":"asc",this.activeClass=this.order+" active",this.num=""):2==t?(this.num="asc"==this.num?"desc":"asc",this.activeClass=this.num+" active",this.order=""):this.order="",this.getlistData(!0)},clearHistory:function(){var a=this;return o(n.default.mark((function e(){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.removeStorage({key:"history"}),a.historyData=[];case 2:case"end":return e.stop()}}),e)})))()},searchWords:function(a){var e=this;return o(n.default.mark((function r(){var i,s;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=a.currentTarget.dataset.value,e.words=i||e.words,s=t.getStorageSync("history"),s?(s.length>3&&s.splice(0,1),-1==s.indexOf(e.words)&&t.setStorage({key:"history",data:s.concat(e.words)})):t.setStorage({key:"history",data:[e.words]}),e.getHistoryData(),e.getHotData(),e.tipsData=[],e.getlistData(!0);case 8:case"end":return n.stop()}}),r)})))()},getHotData:function(t){var a=this;return o(n.default.mark((function t(){var e;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.searchIndexActionApi)({});case 2:e=t.sent,a.hotData=e.data.hotKeywordList;case 4:case"end":return t.stop()}}),t)})))()},tipsearch:function(a){var e=this;return o(n.default.mark((function a(){var i;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,r.searchHelperApi)({keyword:e.words,page:e.page});case 2:if(i=a.sent,!i.data.msg){a.next=8;break}return t.showToast({icon:"none",duration:1e3,title:i.data.msg}),a.abrupt("return",!1);case 8:e.tipsData=i.data.res;case 9:case"end":return a.stop()}}),a)})))()},getHistoryData:function(){this.historyData=t.getStorageSync("history")||[],this.historyData.length>4&&(this.historyData.length=4,this.historyData=this.historyData)},topicDetail:function(a){t.navigateTo({url:"/apiShop/topicdetail/main?id="+a})}},computed:{}};a.default=c}).call(this,e("543d")["default"])}},[["8ee7","common/runtime","common/vendor"]]]);