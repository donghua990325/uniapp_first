(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["apiMember/deposit/main"],{"0536":function(t,e,n){},"1a9c":function(t,e,n){"use strict";(function(t){n("a2bf");a(n("66fd"));var e=a(n("3334"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},3334:function(t,e,n){"use strict";n.r(e);var a=n("35dd"),r=n("d8db");for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n("b819");var u,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"7ae2b2c1",null,!1,a["a"],u);e["default"]=s.exports},"35dd":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.paytype="wxpaywxapp"})},o=[]},adf1:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=u(n("a34a")),r=n("de50"),o=n("26b0");function u(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,a,r,o,u){try{var i=t[o](u),s=i.value}catch(c){return void n(c)}i.done?e(s):Promise.resolve(s).then(a,r)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function u(t){i(o,a,r,u,s,"next",t)}function s(t){i(o,a,r,u,s,"throw",t)}u(void 0)}))}}var c={onShow:function(){(0,o.toLogin)(),console.log(),t.getStorageSync("openId")||this.getWechatOpenid()},data:function(){return{advance:"0",inputAmount:"",amountList:[10,50,100],paytype:"wxpaywxapp",alipaywap:"",order_sn:""}},created:function(){this.GetAdvance()},methods:{GetAdvance:function(){var t=this;return s(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,r.memberInfoApi)({});case 2:n=e.sent,t.advance=n.data.info.user_money,t.alipaywap=n.data.info.alipay_url;case 5:case"end":return e.stop()}}),e)})))()},oninput:function(e){if(this.inputAmount.split(".")[1].length>=2)return this.inputAmount=parseFloat(this.inputAmount).toFixed(2),t.showToast({title:"最多只能输入两位小数哦",icon:"none"}),this.inputAmount},select:function(t){this.inputAmount=t},doDeposit:function(){var e=this;return s(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("NaN"!=parseFloat(e.inputAmount).toString()){n.next=3;break}return t.showToast({title:"请输入正确金额",icon:"none"}),n.abrupt("return");case 3:if(!(e.inputAmount<=0)){n.next=6;break}return t.showToast({title:"请输入大于0的金额",icon:"none"}),n.abrupt("return");case 6:if(parseFloat(e.inputAmount).toFixed(2)==parseFloat(e.inputAmount)){n.next=9;break}return t.showToast({title:"最多只能输入两位小数哦~",icon:"none"}),n.abrupt("return");case 9:return n.next=11,(0,r.createOrderApi)({money:e.inputAmount});case 11:o=n.sent,o&&(e.order_sn=o.data),n.t0=e.paytype,n.next="wxpaywxapp"===n.t0?16:"malipaymyapp"===n.t0?19:"wxpayh5"===n.t0?22:"malipaynew"===n.t0?25:"wxpayappplus"===n.t0?28:"malipayappplus"===n.t0?31:34;break;case 16:return e.wxpaywxappPay(),n.abrupt("return",!1);case 19:return e.malipaymyappPay(),n.abrupt("return",!1);case 22:return e.wxpayh5Pay(),n.abrupt("return",!1);case 25:return e.malipaynewPay(),n.abrupt("return",!1);case 28:return e.wxpayappplusPay(),n.abrupt("return",!1);case 31:return e.malipayappplusPay(),n.abrupt("return",!1);case 34:return n.abrupt("return",!1);case 36:case"end":return n.stop()}}),n)})))()},malipaynewPay:function(){var t=this;return s(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(window.location.href),n=t.alipaywap+"&order_sn="+t.order_sn+"&body=账户余额充值&passback_params=deposit&money="+t.inputAmount+"&quit_url="+window.location.href,location.href=n;case 3:case"end":return e.stop()}}),e)})))()},malipayappplusPay:function(){var e=this;return s(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("支付宝支付"),n.next=3,(0,r.payDopaymentApi)({order_id:e.order_sn,money:e.inputAmount,pay_type:"alipayApp",passback_params:"deposit"});case 3:o=n.sent,e,t.requestPayment({provider:"alipay",orderInfo:o.data.response.payInfo,success:function(e){t.redirectTo({url:"/apiMember/advancelist/main"})},fail:function(t){console.log(t),console.log("支付失败")}});case 6:case"end":return n.stop()}}),n)})))()},wxpaywxappPay:function(){var e=this;return s(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("微信小程序支付"),n.next=3,(0,r.payDopaymentApi)({order_id:e.order_sn,money:e.inputAmount,pay_type:"wxpayMp",openid:t.getStorageSync("openId"),passback_params:"deposit"});case 3:if(o=n.sent,!1!==o.data.res){n.next=7;break}return t.showToast({icon:"none",title:o.data.msg}),n.abrupt("return",!1);case 7:console.log("---------------"),console.log(o),console.log("---------------"),t.requestPayment({provider:"wxpay",timeStamp:o.data.timeStamp,nonceStr:o.data.nonceStr,package:o.data.package,signType:"MD5",paySign:o.data.paySign,success:function(e){console.log("充值成功"),console.log("success:"+JSON.stringify(e)),t.switchTab({url:"/pages/my/main"})},fail:function(t){console.log("fail:"+JSON.stringify(t))}});case 11:case"end":return n.stop()}}),n)})))()},wxpayh5Pay:function(){var e=this;return s(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,r.payDopaymentApi)({pay_id:e.paytype,order_id:e.order_sn,money:e.inputAmount,pay_type:"wxpayH5",passback_params:"deposit"});case 2:if(o=n.sent,!1!==o.data.res){n.next=6;break}return t.showToast({title:o.data.msg,icon:"none",duration:1500}),n.abrupt("return",!1);case 6:!0===o.data.res&&(location.href=o.data.url);case 7:case"end":return n.stop()}}),n)})))()},wxpayappplusPay:function(){var e=this;return s(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("微信APP支付"),n.next=3,(0,r.payDopaymentApi)({order_id:e.order_sn,money:e.inputAmount,pay_type:"wxpayApp",passback_params:"deposit"});case 3:o=n.sent,t.requestPayment({provider:"wxpay",orderInfo:o.data.response,success:function(t){console.log("支付成功"),console.log(t)},fail:function(t){console.log("失败"),console.log(t)}});case 5:case"end":return n.stop()}}),n)})))()},getWechatOpenid:function(){var e=this;return s(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.showLoading({title:"登录中...",mask:!0,success:function(t){}}),t.login({success:function(){var n=s(a.default.mark((function n(o){var u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!o.code){n.next=7;break}return e.code=o.code,console.log("code："+e.code),n.next=5,(0,r.loginWechatApi)({code:e.code,platform:"MP-WEIXIN-MOBILE"});case 5:u=n.sent,!0===u.data.res&&t.setStorageSync("openId",u.data.openid);case 7:case"end":return n.stop()}}),n)})));function o(t){return n.apply(this,arguments)}return o}()});case 2:case"end":return n.stop()}}),n)})))()}},onLoad:function(){}};e.default=c}).call(this,n("543d")["default"])},b819:function(t,e,n){"use strict";var a=n("0536"),r=n.n(a);r.a},d8db:function(t,e,n){"use strict";n.r(e);var a=n("adf1"),r=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=r.a}},[["1a9c","common/runtime","common/vendor"]]]);