(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["apiMember/aftersale/main"],{"112d":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("a34a")),o=n("de50"),a=n("26b0");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(d){return void n(d)}u.done?t(s):Promise.resolve(s).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,s,"next",e)}function s(e){u(a,r,o,i,s,"throw",e)}i(void 0)}))}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={onLoad:function(e){this.orderId=e.orderId},onShow:function(){(0,a.toLogin)(),this.orderId=this.orderId},data:function(){var e;return e={list:["拍错了，重拍","不想要了","型号不对"],items:[{value:"仅退款",name:"仅退款"},{value:"退货退款",name:"退货退款",checked:"true"}],i:0,Listids:[],current:0,notice:"为了尽快处理你的售后申请，请填写详细描述（10-300字）",value:"",productList:[],orderId:0,user:{name:"张三",tel:13888886666},orderInfo:{},orderGoods:[],handleOption:{}},d(e,"orderId",""),d(e,"afterType","仅退款"),d(e,"goods_active","false"),d(e,"title",""),d(e,"content",""),d(e,"goods_id",""),d(e,"show",!1),e},components:{},mounted:function(){var e=this;return s(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$mp.query.id&&(e.orderId=parseInt(e.$mp.query.id)),e.getOrderDetail();case 2:case"end":return t.stop()}}),t)})))()},methods:{showList:function(){1==this.show?this.show=!1:this.show=!0},selectList:function(e){this.title=e,this.show=!1},changeMsg:function(e){this.title=e.newVal},tagVal:function(e){this.afterType=e},goods_Id:function(e){alert(e),this.goods_id=e},getOrderDetail:function(){var e=this;return s(r.default.mark((function t(){var n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,o.orderdetailGetApi)({orderId:e.orderId});case 2:n=t.sent,e.orderInfo=n.data.orderInfo,e.orderGoods=n.data.orderGoods,e.goods_id=e.orderGoods[0].id,e.handleOption=n.data.handleOption;case 7:case"end":return t.stop()}}),t)})))()},countGoodsNumber:function(t,n){return s(r.default.mark((function o(){var a;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(t),a=t.number,!n){r.next=7;break}t.number++,t.number>a&&(e.showToast({title:"不能超过最大商品数量",icon:"none",duration:1500}),t.number--),r.next=12;break;case 7:if(!(t.number<=1)){r.next=11;break}return e.showToast({title:"最少选择一件商品",icon:"none",duration:1500}),t.number=1,r.abrupt("return");case 11:t.number--;case 12:case"end":return r.stop()}}),o)})))()},payTimer:function(){var e=this,t=this.orderInfo;setInterval((function(){t.add_time-=1,e.orderInfo=t}),1e3)},submitAfterSale:function(){var t=this;return s(r.default.mark((function n(){var a,i,u,s;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("false"!=t.goods_active){n.next=3;break}return e.showToast({title:"请选择商品",icon:"none",duration:1500,mask:!0,success:function(e){}}),n.abrupt("return",!1);case 3:if(""!==t.content&&""!==t.title){n.next=6;break}return e.showToast({title:"请填写申请原因/申请内容",icon:"none",duration:1500,mask:!0,success:function(e){}}),n.abrupt("return",!1);case 6:for(a=[],i=[],u=0;u<t.orderGoods.length;u++)t.orderGoods[u].is_checked&&(a+=+t.orderGoods[u].id+",",i+=t.orderGoods[u].number+",");return n.next=11,(0,o.submitAfterSaleApi)({orderId:t.orderId,note:"["+t.afterType+" "+t.title+"]"+t.content,user_id:e.getStorageSync("user_id"),goods_id:a,goods_num:i});case 11:s=n.sent,console.log(s.data.status),"succ"==s.data.status?(e.showToast({title:"申请成功",icon:"none",duration:1500}),e.navigateTo({url:"/apiMember/orderlist/main?status=0"})):e.showToast({title:s.data.message,icon:"none",duration:1500});case 14:case"end":return n.stop()}}),n)})))()},changeColor:function(e,t,n){var o=this;return s(r.default.mark((function a(){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.log(e),o.Listids[e]?(o.$set(o.Listids,e,!1),n.is_checked="false",o.goods_active="false"):(o.$set(o.Listids,e,t),n.is_checked="true",o.goods_active="true");case 2:case"end":return r.stop()}}),a)})))()},toaddrpage:function(){e.navigateTo({url:"/apiCart/address/main"})}}};t.default=c}).call(this,n("543d")["default"])},1897:function(e,t,n){"use strict";var r=n("bc4b"),o=n.n(r);o.a},4883:function(e,t,n){"use strict";var r;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var o=function(){var e=this,t=e.$createElement;e._self._c},a=[]},"908e":function(e,t,n){"use strict";n.r(t);var r=n("112d"),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},b736:function(e,t,n){"use strict";n.r(t);var r=n("4883"),o=n("908e");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("1897");var i,u=n("f0c5"),s=Object(u["a"])(o["default"],r["b"],r["c"],!1,null,"f9549b88",null,!1,r["a"],i);t["default"]=s.exports},bc4b:function(e,t,n){},f699:function(e,t,n){"use strict";(function(e){n("a2bf");r(n("66fd"));var t=r(n("b736"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["f699","common/runtime","common/vendor"]]]);