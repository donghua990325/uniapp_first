(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["apiCart/addaddress/main"],{"21f0":function(e,t,r){"use strict";var n=r("8fe1"),s=r.n(n);s.a},"381f":function(e,t,r){"use strict";(function(e){r("a2bf");n(r("66fd"));var t=n(r("ae72"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"6daa":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("a34a")),s=r("de50"),i=r("26b0");function a(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r,n,s,i,a){try{var d=e[i](a),o=d.value}catch(c){return void r(c)}d.done?t(o):Promise.resolve(o).then(n,s)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){d(i,n,s,a,o,"next",e)}function o(e){d(i,n,s,a,o,"throw",e)}a(void 0)}))}}var c=function(){Promise.all([r.e("common/vendor"),r.e("components/w-picker/w-picker")]).then(function(){return resolve(r("6a4c"))}.bind(null,r)).catch(r.oe)},u={onShow:function(){(0,i.toLogin)()},created:function(){},mounted:function(){this.$root.$mp.query.res&&(this.res=JSON.parse(decodeURIComponent(this.$root.$mp.query.res)),console.log(this.res),this.userName=this.res.userName,this.telNumber=this.res.telNumber,this.address="".concat(this.res.provinceName," ").concat(this.res.cityName," ").concat(this.res.countyName),this.detailadress=this.res.detailInfo),this.$root.$mp.query.id&&(this.id=this.$root.$mp.query.id),this.getDetail()},data:function(){return{region:[],customItem:"全部",id:"",res:{},userName:"",telNumber:"",email:"",address:"",detailadress:"",add_id_list:"",defaultVal:[10,0,5],checked:!0}},components:{wPicker:c},methods:{onConfirm:function(e){this.address=e.checkArr[0]+" "+e.checkArr[1]+" "+e.checkArr[2],this.address_id_list=e.checkKey},watch:function(){},WebaddressChange:function(){var e=this;return o(n.default.mark((function t(){return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs["region"].show();case 1:case"end":return t.stop()}}),t)})))()},getDetail:function(){var t=this;return o(n.default.mark((function r(){var i,a,d,o;return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""!=t.$mp.query.mobile_addr_id_list&&t.$mp.query.mobile_addr_id_list&&(i=t.$mp.query.mobile_addr_id_list.split(","),a=[],i.forEach((function(e){a.push(parseInt(e))})),t.defaultVal=a),""==t.$mp.query.id||!t.$mp.query.id){r.next=14;break}return r.next=4,(0,s.addressDetailApi)({address_id:t.$mp.query.id});case 4:d=r.sent,!1===d.data.is_detail&&(e.showToast({title:"无此地址",icon:"none",duration:1e3}),setTimeout((function(){e.redirectTo({url:"/apiCart/addressselect/main"})}),1e3)),o=d.data.data,t.userName=o.consignee,t.telNumber=o.mobile,t.email=o.email,t.address=o.province_name+" "+o.city_name+" "+o.district_name,t.detailadress=o.address,""!==o.mobile_addr_id_list&&(t.address_id_list="",t.add_id_list=o.mobile_addr_id_list),t.checked="true"==o.is_default;case 14:case"end":return r.stop()}}),r)})))()},checkboxChange:function(e){this.checked=e.mp.detail.value},saveAddress:function(){var t=this;return o(n.default.mark((function r(){var i,a,d,o,c;return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=t,/^[a-zA-Z0-9]+([-_.][a-zA-Z0-9]+)*@[a-zA-Z0-9]+([-_.][a-zA-Z0-9]+)*\.[a-z]{2,}$/,a=/0?(13|14|15|16|17|18|19)[0-9]{9}/,d=/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/,!1!==d.test(i.userName)){r.next=7;break}return e.showToast({icon:"none",duration:1e3,title:"姓名格式错误"}),r.abrupt("return",!1);case 7:if(!1!==a.test(i.telNumber)){r.next=10;break}return e.showToast({icon:"none",duration:1e3,title:"手机号格式错误"}),r.abrupt("return",!1);case 10:if(""!=i.detailadress){r.next=13;break}return e.showToast({title:"地址不能为空",icon:"none",duration:2e3,mask:!0,success:function(e){}}),r.abrupt("return",!1);case 13:if(!(i.detailadress.length>32)){r.next=16;break}return e.showToast({title:"地址输入有误，不能超过32个字符",icon:"none",duration:2e3,mask:!0,success:function(e){}}),r.abrupt("return",!1);case 16:return o=i.address.split(" "),""!=t.address_id_list&&t.address_id_list?t.add_id_list=Object.values(t.address_id_list).join(","):t.add_id_list="10,0,5",r.next=20,(0,s.addaddressDetailActionApi)({consignee:i.userName,email:i.email,mobile:i.telNumber,address:i.detailadress,mobile_addr_id_list:t.add_id_list,checked:i.checked,address_id:i.id,province:o[0],city:o[1],district:o[2]});case 20:c=r.sent,c.data.is_add&&e.showToast({title:"成功",icon:"success",duration:2e3,mask:!0,success:function(t){e.redirectTo({url:"/apiCart/addressselect/main"})}});case 22:case"end":return r.stop()}}),r)})))()},GetAddress:function(){var t=this;e.chooseLocation({success:function(e){console.log("详细地址："+e.address);var r=e.latitude+","+e.longitude,n=(0,s.GetRealyAddressApi)({params:r});n.then((function(e){console.log(e.result.address_component.province+e.result.address_component.city+e.result.address_component.district),t.address="".concat(e.result.address_component.province," ").concat(e.result.address_component.city," ").concat(e.result.address_component.district),t.detailadress=e.result.address_component.street_number}))}})}}};t.default=u}).call(this,r("543d")["default"])},"8fe1":function(e,t,r){},ae72:function(e,t,r){"use strict";r.r(t);var n=r("cd76"),s=r("f05c");for(var i in s)"default"!==i&&function(e){r.d(t,e,(function(){return s[e]}))}(i);r("21f0");var a,d=r("f0c5"),o=Object(d["a"])(s["default"],n["b"],n["c"],!1,null,"7cbaf70b",null,!1,n["a"],a);t["default"]=o.exports},cd76:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}));var n={wPicker:function(){return Promise.all([r.e("common/vendor"),r.e("components/w-picker/w-picker")]).then(r.bind(null,"6a4c"))}},s=function(){var e=this,t=e.$createElement;e._self._c},i=[]},f05c:function(e,t,r){"use strict";r.r(t);var n=r("6daa"),s=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a}},[["381f","common/runtime","common/vendor"]]]);