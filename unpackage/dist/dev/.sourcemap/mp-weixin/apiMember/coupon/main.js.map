{"version":3,"sources":["uni-app:///main.js","webpack:///E:/app/apiMember/coupon/main.vue?479b","webpack:///E:/app/apiMember/coupon/main.vue?433d","webpack:///E:/app/apiMember/coupon/main.vue?946c","webpack:///E:/app/apiMember/coupon/main.vue?9981","uni-app:///apiMember/coupon/main.vue","webpack:///E:/app/apiMember/coupon/main.vue?7c41","webpack:///E:/app/apiMember/coupon/main.vue?b421"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,gG;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACgK;AAChK,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAklB,CAAgB,8mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkItmB;AACA,gE;AACA;AACA,QADA,kBACA,OADA,EACA;AACA;AACA;AACA;;;;;;;;;;;AAWA,GAfA;AAgBA,QAhBA,oBAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAzBA;AA0BA,MA1BA,kBA0BA;AACA;AACA,oBADA;;;;;AAMA,qBANA;;;;;AAWA;AACA,wBAZA;AAaA,2BAbA;AAcA,oBAdA;AAeA,oBAfA;AAgBA,mBAhBA;AAiBA,gBAjBA,EAiBA;AACA,gBAlBA,EAkBA;AACA,mBAnBA,EAmBA;AACA,kBApBA,EAoBA;AACA,aArBA,CAqBA;AArBA;AAuBA,GAlDA;AAmDA,cAnDA,wBAmDA,CAnDA,EAmDA,EAnDA;AAoDA;AACA,mBArDA,+BAqDA;AACA;AACA;AACA,KAFA,EAEA,IAFA;AAGA,GAzDA;AA0DA;AACA;AACA,OAFA,eAEA,EAFA,EAEA,SAFA,EAEA,UAFA,EAEA,SAFA,EAEA;AACA;AACA;AACA;AACA,4BADA,EACA;AACA,wBAFA,EAEA;AACA,sBAHA;AAIA,oBAJA,EAIA;AACA,2CALA;;AAOA;AACA;AACA,yCAZA,CAYA;AACA,iDAbA,CAaA;AACA,mDAdA,CAcA;AACA;AACA,kCADA;;AAGA,KApBA;AAqBA,iBArBA,yBAqBA,IArBA,EAqBA;AACA;AACA,2CADA;AAEA,yCAFA;AAGA,qCAHA,GADA,SACA,IADA;;;AAOA;AACA,qDARA;AASA,KA9BA;AA+BA,cA/BA,sBA+BA,IA/BA,EA+BA;AACA;AACA;AACA;AACA;AACA,oBADA;AAEA,mBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,EAIA,GAJA;AAKA;AACA,KA/CA;AAgDA;AACA,cAjDA,sBAiDA,KAjDA,EAiDA,KAjDA,EAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA3DA;AA4DA,aA5DA,qBA4DA,KA5DA,EA4DA,KA5DA,EA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,EAEA,GAFA;AAGA;AACA;AACA,KA3FA;;AA6FA,YA7FA,oBA6FA,KA7FA,EA6FA,MA7FA,EA6FA;AACA;AACA;AACA,KAhGA;;AAkGA;AACA,gBAnGA,wBAmGA,EAnGA,EAmGA,IAnGA,EAmGA;AACA;AACA,iCADA,GADA,SACA,IADA;;AAIA;AACA,uBADA,GACA,MADA;AAEA;AACA,gCADA;AAEA,iCAFA;AAGA;AACA;AACA;AACA,uBAFA,EAEA,IAFA;AAGA,qBAPA;;AASA;AACA,mBAhBA,GAgBA,WAhBA;AAiBA,iBAjBA,GAiBA,CAjBA,cAiBA,OAjBA;AAkBA,gCAlBA;AAmBA,kCAnBA,6CAiBA,GAjBA;;;;AAuBA;AACA,uCAxBA;AAyBA,KA5HA;;AA8HA,WA9HA,qBA8HA;AACA;AACA,KAhIA,EA1DA,E;;;;;;;;;;;;;ACpIA;AAAA;AAAA;AAAA;AAAmmC,CAAgB,glCAAG,EAAC,C;;;;;;;;;;;ACAvnC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"apiMember/coupon/main.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './apiMember/coupon/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=dd2d74ae&scoped=true&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=dd2d74ae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dd2d74ae\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"apiMember/coupon/main.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=dd2d74ae&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\n  <view>\n    <cu-custom bgColor=\"bg-white\" :isBack=\"true\">\n      <block slot=\"backText\">返回</block>\n      <block slot=\"content\" style=\"display: flex; justify-content: center\"\n        >红包</block\n      >\n    </cu-custom>\n\n    <view class=\"tabr\" :style=\"{ top: headerTop }\">\n      <view :class=\"{ on: typeClass == 'valid' }\" @tap=\"switchType('valid')\"\n        >可用</view\n      >\n      <view :class=\"{ on: typeClass == 'invalid' }\" @tap=\"switchType('invalid')\"\n        >已失效</view\n      >\n      <view class=\"border\" :class=\"typeClass\"></view>\n    </view>\n    <view class=\"place\"></view>\n    <view class=\"list\">\n      <!-- 优惠券列表 -->\n      <view class=\"sub-list valid\" :class=\"subState\">\n        <view class=\"tis\" v-if=\"couponList.length == 0\">没有数据~</view>\n        <view class=\"row\" v-for=\"(row, index) in couponList\" :key=\"index\">\n          <!-- 删除按钮 -->\n          <view class=\"menu\" @tap.stop=\"deleteCoupon(row.bonus_id, couponList)\">\n            <view class=\"icon shanchu\">删除</view>\n          </view>\n          <!-- content -->\n          <view\n            class=\"carrier\"\n            :class=\"[\n              typeClass == 'valid'\n                ? theIndex == index\n                  ? 'open'\n                  : oldIndex == index\n                  ? 'close'\n                  : ''\n                : '',\n            ]\"\n            @touchstart=\"touchStart(index, $event)\"\n            @touchmove=\"touchMove(index, $event)\"\n            @touchend=\"touchEnd(index, $event)\"\n          >\n            <view class=\"left\">\n              <view class=\"title\">{{ row.type_name }}</view>\n              <view class=\"term\"\n                >最小商品金额为:{{ row.min_goods_amount }}元</view\n              >\n              <view class=\"term\"\n                >{{ row.use_start_date }} ~ {{ row.use_end_date }}</view\n              >\n              <view class=\"gap-top\"></view>\n              <view class=\"gap-bottom\"></view>\n            </view>\n            <view class=\"right\">\n              <view class=\"ticket\">\n                <view class=\"num\">{{ row.type_money }}</view>\n                <view class=\"unit\">元</view>\n              </view>\n              <view class=\"criteria\"></view>\n              <view\n                v-if=\"is_order == 'y'\"\n                @click=\"\n                  use(\n                    row.bonus_id,\n                    row.type_name,\n                    row.type_money,\n                    row.min_goods_amount\n                  )\n                \"\n                class=\"use\"\n                >去使用</view\n              >\n              <view v-else class=\"use\">未失效</view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"sub-list invalid\" :class=\"subState\">\n        <view class=\"tis\" v-if=\"couponList.length == 0\">没有数据~</view>\n        <view class=\"row\" v-for=\"(row, index) in couponList\" :key=\"index\">\n          <!-- 删除按钮 -->\n          <view class=\"menu\" @tap.stop=\"deleteCoupon(row.bonus_id, couponList)\">\n            <view class=\"icon shanchu\">删除</view>\n          </view>\n          <!-- content -->\n          <view\n            class=\"carrier\"\n            :class=\"[\n              typeClass == 'invalid'\n                ? theIndex == index\n                  ? 'open'\n                  : oldIndex == index\n                  ? 'close'\n                  : ''\n                : '',\n            ]\"\n            @touchstart=\"touchStart(index, $event)\"\n            @touchmove=\"touchMove(index, $event)\"\n            @touchend=\"touchEnd(index, $event)\"\n          >\n            <view class=\"left\">\n              <view class=\"title\">{{ row.type_name }}</view>\n              <view class=\"term\"\n                >最小商品金额为:{{ row.min_goods_amount }}元</view\n              >\n              <view class=\"term\"\n                >{{ row.use_start_date }} ~ {{ row.use_end_date }}</view\n              >\n              <view class=\"icon shixiao\"></view>\n              <view class=\"gap-top\"></view>\n              <view class=\"gap-bottom\"></view>\n            </view>\n            <view class=\"right invalid\">\n              <view class=\"ticket\">\n                <view class=\"num\">{{ row.type_money }}</view>\n                <view class=\"unit\">元</view>\n              </view>\n              <view class=\"criteria\"></view>\n              <view class=\"use\">已失效</view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { toLogin } from \"@/server/api.js\";\nimport { couponListApi, deleteCouponApi } from \"@/server/config.js\";\nexport default {\n  onLoad(options) {\n    this.money = options.money;\n    this.order = options.order;\n    //兼容H5下排序栏位置\n    // #ifdef H5\n    //定时器方式循环获取高度为止，这么写的原因是onLoad中head未必已经渲染出来。\n    let Timer = setInterval(() => {\n      let uniHead = document.getElementsByTagName(\"uni-page-head\");\n      if (uniHead.length > 0) {\n        this.headerTop = uniHead[0].offsetHeight + \"px\";\n        clearInterval(Timer); //清除定时器\n      }\n    }, 1);\n    // #endif\n  },\n  onShow() {\n    //判断是否登录，没有直接跳转登录界面\n    toLogin();\n    this.getCouponList();\n    if (this.order) {\n      // 确认从订单页面过来\n      this.is_order = this.order;\n      this.costItem = this.money;\n    }\n  },\n  data() {\n    return {\n      couponList: [],\n      // #ifdef H5\n      headerTop: \"50px\",\n      // #endif\n      // #ifdef MP\n      headerTop: \"9%\",\n      // #endif\n      // #ifdef APP-PLUS\n      headerTop: \"10%\",\n      // #endif\n      //控制滑动效果\n      typeClass: \"valid\",\n      subState: \"showvalid\",\n      theIndex: null,\n      oldIndex: null,\n      isStop: false,\n      may_use: 0, // 可使用的数量\n      failure: 0, // 已失效的数量\n      is_order: \"n\", // 是否从订单页面过来\n      costItem: \"\", // 订单金额\n      page: 1, // 当前的页数\n    };\n  },\n  onPageScroll(e) {},\n  //下拉刷新，需要自己在page.json文件中配置开启页面下拉刷新 \"enablePullDownRefresh\": true\n  onPullDownRefresh() {\n    setTimeout(function () {\n      uni.stopPullDownRefresh();\n    }, 1000);\n  },\n  methods: {\n    // 点击去使用\n    use(id, type_name, type_money, min_money) {\n      //id为红包id\n      if (Number(this.costItem) < min_money) {\n        uni.showToast({\n          title: \"不满足红包使用条件\", //提示的内容,\n          duration: 2000, //延迟时间,\n          icon: \"none\",\n          mask: true, //显示透明蒙层，防止触摸穿透,\n          success: (res) => {},\n        });\n        return false;\n      }\n      uni.setStorageSync(\"bonus_id\", id); // 记录红包id\n      uni.setStorageSync(\"bonusName\", type_name); // 记录红包名称\n      uni.setStorageSync(\"bonusMoney\", type_money); // 记录红包金额\n      uni.navigateBack({\n        url: \"/apiCart/order/main\",\n      });\n    },\n    async getCouponList(tyep) {\n      const data = await couponListApi({\n        status: this.subState,\n        openId: this.openId,\n        page: this.page,\n      });\n\n      this.couponList = data.data.bonus;\n      this.may_use = data.data.showvalid;\n    },\n    switchType(type) {\n      if (this.typeClass == type) {\n        return;\n      }\n      uni.pageScrollTo({\n        scrollTop: 0,\n        duration: 0,\n      });\n      this.typeClass = type;\n      this.subState = this.typeClass == \"\" ? \"\" : \"show\" + type;\n      setTimeout(() => {\n        this.oldIndex = null;\n        this.theIndex = null;\n        this.subState = this.typeClass == \"valid\" ? \"\" : this.subState;\n      }, 200);\n      this.getCouponList(type);\n    },\n    //控制左滑删除效果-begin\n    touchStart(index, event) {\n      //多点触控不触发\n      if (event.touches.length > 1) {\n        this.isStop = true;\n        return;\n      }\n      this.oldIndex = this.theIndex;\n      this.theIndex = null;\n      //初始坐标\n      this.initXY = [event.touches[0].pageX, event.touches[0].pageY];\n    },\n    touchMove(index, event) {\n      //多点触控不触发\n      if (event.touches.length > 1) {\n        this.isStop = true;\n        return;\n      }\n      let moveX = event.touches[0].pageX - this.initXY[0];\n      let moveY = event.touches[0].pageY - this.initXY[1];\n\n      if (this.isStop || Math.abs(moveX) < 5) {\n        return;\n      }\n      if (Math.abs(moveY) > Math.abs(moveX)) {\n        // 竖向滑动-不触发左滑效果\n        this.isStop = true;\n        return;\n      }\n\n      if (moveX < 0) {\n        this.theIndex = index;\n        this.isStop = true;\n      } else if (moveX > 0) {\n        if (this.theIndex != null && this.oldIndex == this.theIndex) {\n          this.oldIndex = index;\n          this.theIndex = null;\n          this.isStop = true;\n          setTimeout(() => {\n            this.oldIndex = null;\n          }, 150);\n        }\n      }\n    },\n\n    touchEnd(index, $event) {\n      //解除禁止触发状态\n      this.isStop = false;\n    },\n\n    //删除商品\n    async deleteCoupon(id, List) {\n      const data = await deleteCouponApi({\n        coupon_id: id,\n      });\n      if (data.data.msg == \"suc\") {\n        let _this = this;\n        uni.showToast({\n          icon: \"none\",\n          title: \"删除成功\",\n          success: function () {\n            setTimeout(function () {\n              _this.getCouponList();\n            }, 1000);\n          },\n        });\n      }\n      let len = List.length;\n      for (let i = 0; i < len; i++) {\n        if (id == List[i].id) {\n          List.splice(i, 1);\n          break;\n        }\n      }\n      this.oldIndex = null;\n      this.theIndex = null;\n    },\n\n    discard() {\n      //丢弃\n    },\n  },\n};\n</script>\n<style lang='scss' scoped>\n@import \"./style\";\n</style>","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=dd2d74ae&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=dd2d74ae&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1607929985268\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}