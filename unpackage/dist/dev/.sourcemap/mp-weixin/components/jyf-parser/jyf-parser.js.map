{"version":3,"sources":["webpack:///E:/app/components/jyf-parser/jyf-parser.vue?33b8","webpack:///E:/app/components/jyf-parser/jyf-parser.vue?95c3","webpack:///E:/app/components/jyf-parser/jyf-parser.vue?5496","webpack:///E:/app/components/jyf-parser/jyf-parser.vue?d6a8","uni-app:///components/jyf-parser/jyf-parser.vue","webpack:///E:/app/components/jyf-parser/jyf-parser.vue?e299","webpack:///E:/app/components/jyf-parser/jyf-parser.vue?abea"],"names":[],"mappings":"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","file":"components/jyf-parser/jyf-parser.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./jyf-parser.vue?vue&type=template&id=eab15eb8&\"\nvar renderjs\nimport script from \"./jyf-parser.vue?vue&type=script&lang=js&\"\nexport * from \"./jyf-parser.vue?vue&type=script&lang=js&\"\nimport style0 from \"./jyf-parser.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/jyf-parser/jyf-parser.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./jyf-parser.vue?vue&type=template&id=eab15eb8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./jyf-parser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./jyf-parser.vue?vue&type=script&lang=js&\"","<template>\n  <view>\n    <slot v-if=\"!nodes.length\" />\n    <!--#ifdef APP-PLUS-NVUE-->\n    <web-view\n      id=\"_top\"\n      ref=\"web\"\n      :style=\"'margin-top:-2px;height:' + height + 'px'\"\n      @onPostMessage=\"_message\"\n    />\n    <!--#endif-->\n    <!--#ifndef APP-PLUS-NVUE-->\n    <view\n      id=\"_top\"\n      :style=\"\n        showAm +\n        (selectable ? ';user-select:text;-webkit-user-select:text' : '')\n      \"\n    >\n      <!--#ifdef H5 || MP-360-->\n      <div :id=\"'rtf' + uid\"></div>\n      <!--#endif-->\n      <!--#ifndef H5 || MP-360-->\n      <trees :nodes=\"nodes\" :lazyLoad=\"lazyLoad\" :loading=\"loadingImg\" />\n      <!--#endif-->\n    </view>\n    <!--#endif-->\n  </view>\n</template>\n\n<script>\n// #ifndef H5 || APP-PLUS-NVUE || MP-360\nimport trees from \"./libs/trees\";\nvar cache = {},\n  // #ifdef MP-WEIXIN || MP-TOUTIAO\n  fs = uni.getFileSystemManager ? uni.getFileSystemManager() : null,\n  // #endif\n  Parser = require(\"./libs/MpHtmlParser.js\");\nvar dom;\n// 计算 cache 的 key\nfunction hash(str) {\n  for (var i = str.length, val = 5381; i--; )\n    val += (val << 5) + str.charCodeAt(i);\n  return val;\n}\n// #endif\n// #ifdef H5 || APP-PLUS-NVUE || MP-360\nvar rpx = uni.getSystemInfoSync().windowWidth / 750,\n  cfg = require(\"./libs/config.js\");\n// #endif\n// #ifdef APP-PLUS-NVUE\nvar weexDom = weex.requireModule(\"dom\");\n// #endif\n/**\n * Parser 富文本组件\n * @tutorial https://github.com/jin-yufeng/Parser\n * @property {String} html 富文本数据\n * @property {Boolean} autopause 是否在播放一个视频时自动暂停其他视频\n * @property {Boolean} autoscroll 是否自动给所有表格添加一个滚动层\n * @property {Boolean} autosetTitle 是否自动将 title 标签中的内容设置到页面标题\n * @property {Number} compress 压缩等级\n * @property {String} domain 图片、视频等链接的主域名\n * @property {Boolean} lazyLoad 是否开启图片懒加载\n * @property {String} loadingImg 图片加载完成前的占位图\n * @property {Boolean} selectable 是否开启长按复制\n * @property {Object} tagStyle 标签的默认样式\n * @property {Boolean} showWithAnimation 是否使用渐显动画\n * @property {Boolean} useAnchor 是否使用锚点\n * @property {Boolean} useCache 是否缓存解析结果\n * @event {Function} parse 解析完成事件\n * @event {Function} load dom 加载完成事件\n * @event {Function} ready 所有图片加载完毕事件\n * @event {Function} error 错误事件\n * @event {Function} imgtap 图片点击事件\n * @event {Function} linkpress 链接点击事件\n * @author JinYufeng\n * @version 20200712\n * @listens MIT\n */\nexport default {\n  name: \"parser\",\n  data() {\n    return {\n      // #ifdef H5 || MP-360\n      uid: this._uid,\n      // #endif\n      // #ifdef APP-PLUS-NVUE\n      height: 1,\n      // #endif\n      // #ifndef APP-PLUS-NVUE\n      showAm: \"\",\n      // #endif\n      nodes: [],\n    };\n  },\n  // #ifndef H5 || APP-PLUS-NVUE || MP-360\n  components: {\n    trees,\n  },\n  // #endif\n  props: {\n    html: String,\n    autopause: {\n      type: Boolean,\n      default: true,\n    },\n    autoscroll: Boolean,\n    autosetTitle: {\n      type: Boolean,\n      default: true,\n    },\n    // #ifndef H5 || APP-PLUS-NVUE || MP-360\n    compress: Number,\n    loadingImg: String,\n    useCache: Boolean,\n    // #endif\n    domain: String,\n    lazyLoad: Boolean,\n    selectable: Boolean,\n    tagStyle: Object,\n    showWithAnimation: Boolean,\n    useAnchor: Boolean,\n  },\n  watch: {\n    html(html) {\n      this.setContent(html);\n    },\n  },\n  created() {\n    // 图片数组\n    this.imgList = [];\n    this.imgList.each = function (f) {\n      for (var i = 0, len = this.length; i < len; i++)\n        this.setItem(i, f(this[i], i, this));\n    };\n    this.imgList.setItem = function (i, src) {\n      if (i == void 0 || !src) return;\n      // #ifndef MP-ALIPAY || APP-PLUS\n      // 去重\n      if (src.indexOf(\"http\") == 0 && this.includes(src)) {\n        var newSrc = src.split(\"://\")[0];\n        for (var j = newSrc.length, c; (c = src[j]); j++) {\n          if (c == \"/\" && src[j - 1] != \"/\" && src[j + 1] != \"/\") break;\n          newSrc += Math.random() > 0.5 ? c.toUpperCase() : c;\n        }\n        newSrc += src.substr(j);\n        return (this[i] = newSrc);\n      }\n      // #endif\n      this[i] = src;\n      // 暂存 data src\n      if (src.includes(\"data:image\")) {\n        var filePath,\n          info = src.match(/data:image\\/(\\S+?);(\\S+?),(.+)/);\n        if (!info) return;\n        // #ifdef MP-WEIXIN || MP-TOUTIAO\n        filePath = `${wx.env.USER_DATA_PATH}/${Date.now()}.${info[1]}`;\n        fs &&\n          fs.writeFile({\n            filePath,\n            data: info[3],\n            encoding: info[2],\n            success: () => (this[i] = filePath),\n          });\n        // #endif\n        // #ifdef APP-PLUS\n        filePath = `_doc/parser_tmp/${Date.now()}.${info[1]}`;\n        var bitmap = new plus.nativeObj.Bitmap();\n        bitmap.loadBase64Data(src, () => {\n          bitmap.save(filePath, {}, () => {\n            bitmap.clear();\n            this[i] = filePath;\n          });\n        });\n        // #endif\n      }\n    };\n  },\n  mounted() {\n    // #ifdef H5 || MP-360\n    this.document = document.getElementById(\"rtf\" + this._uid);\n    // #endif\n    // #ifndef H5 || APP-PLUS-NVUE || MP-360\n    if (dom) this.document = new dom(this);\n    // #endif\n    // #ifdef APP-PLUS-NVUE\n    this.document = this.$refs.web;\n    setTimeout(() => {\n      // #endif\n      if (this.html) this.setContent(this.html);\n      // #ifdef APP-PLUS-NVUE\n    }, 30);\n    // #endif\n  },\n  beforeDestroy() {\n    // #ifdef H5 || MP-360\n    if (this._observer) this._observer.disconnect();\n    // #endif\n    this.imgList.each((src) => {\n      // #ifdef APP-PLUS\n      if (src && src.includes(\"_doc\")) {\n        plus.io.resolveLocalFileSystemURL(src, (entry) => {\n          entry.remove();\n        });\n      }\n      // #endif\n      // #ifdef MP-WEIXIN || MP-TOUTIAO\n      if (src && src.includes(uni.env.USER_DATA_PATH))\n        fs &&\n          fs.unlink({\n            filePath: src,\n          });\n      // #endif\n    });\n    clearInterval(this._timer);\n  },\n  methods: {\n    // 设置富文本内容\n    setContent(html, append) {\n      // #ifdef APP-PLUS-NVUE\n      if (!html) return (this.height = 1);\n      if (append)\n        this.$refs.web.evalJs(\n          \"var b=document.createElement('div');b.innerHTML='\" +\n            html.replace(/'/g, \"\\\\'\") +\n            \"';document.getElementById('parser').appendChild(b)\"\n        );\n      else {\n        html =\n          '<meta charset=\"utf-8\" /><meta name=\"viewport\" content=\"width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no\"><style>html,body{width:100%;height:100%;overflow:hidden}body{margin:0}</style><base href=\"' +\n          this.domain +\n          '\"><div id=\"parser\"' +\n          (this.selectable ? \">\" : ' style=\"user-select:none\">') +\n          this._handleHtml(html).replace(/\\n/g, \"\\\\n\") +\n          '</div><script>\"use strict\";function e(e){if(window.__dcloud_weex_postMessage||window.__dcloud_weex_){var t={data:[e]};window.__dcloud_weex_postMessage?window.__dcloud_weex_postMessage(t):window.__dcloud_weex_.postMessage(JSON.stringify(t))}}document.body.onclick=function(){e({action:\"click\"})},' +\n          (this.showWithAnimation\n            ? 'document.body.style.animation=\"_show .5s\",'\n            : \"\") +\n          'setTimeout(function(){e({action:\"load\",text:document.body.innerText,height:document.getElementById(\"parser\").scrollHeight})},50);\\x3c/script>';\n        this.$refs.web.evalJs(\n          \"document.write('\" + html.replace(/'/g, \"\\\\'\") + \"');document.close()\"\n        );\n      }\n      this.$refs.web.evalJs(\n        'var t=document.getElementsByTagName(\"title\");t.length&&e({action:\"getTitle\",title:t[0].innerText});for(var o,n=document.getElementsByTagName(\"style\"),r=1;o=n[r++];)o.innerHTML=o.innerHTML.replace(/body/g,\"#parser\");for(var i,a,c=document.getElementsByTagName(\"img\"),s=[],d=0,l=0,g=0;a=c[l];l++)a.onload=function(){++d==c.length&&(i=!0,e({action:\"ready\"}))},a.onerror=function(){' +\n          (cfg.errorImg ? 'this.src=\"' + cfg.errorImg + '\",' : \"\") +\n          'e({action:\"error\",source:\"img\",target:this})},a.hasAttribute(\"ignore\")||\"A\"==a.parentElement.nodeName||(a.i=g++,s.push(a.src),a.onclick=function(){e({action:\"preview\",img:{i:this.i,src:this.src}})});e({action:\"getImgList\",imgList:s});for(var u,m=document.getElementsByTagName(\"a\"),f=0;u=m[f];f++)u.onclick=function(){var t,o=this.getAttribute(\"href\");if(\"#\"==o[0]){var n=document.getElementById(o.substr(1));n&&(t=n.offsetTop)}return e({action:\"linkpress\",href:o,offset:t}),!1};for(var h,y=document.getElementsByTagName(\"video\"),v=0;h=y[v];v++)h.style.maxWidth=\"100%\",h.onerror=function(){e({action:\"error\",source:\"video\",target:this})}' +\n          (this.autopause\n            ? \",h.onplay=function(){for(var e,t=0;e=y[t];t++)e!=this&&e.pause()}\"\n            : \"\") +\n          ';for(var _,p=document.getElementsByTagName(\"audio\"),w=0;_=p[w];w++)_.onerror=function(){e({action:\"error\",source:\"audio\",target:this})};' +\n          (this.autoscroll\n            ? 'for(var T,E=document.getElementsByTagName(\"table\"),B=0;T=E[B];B++){var N=document.createElement(\"div\");N.style.overflow=\"scroll\",T.parentNode.replaceChild(N,T),N.appendChild(T)}'\n            : \"\") +\n          'var x=document.getElementById(\"parser\"),b=setInterval(function(){i&&clearInterval(b),e({action:\"height\",height:x.scrollHeight})},350)'\n      );\n      this.nodes = [1];\n      // #endif\n      // #ifdef H5 || MP-360\n      if (!html) {\n        if (this.rtf && !append) this.rtf.parentNode.removeChild(this.rtf);\n        return;\n      }\n      var div = document.createElement(\"div\");\n      if (!append) {\n        if (this.rtf) this.rtf.parentNode.removeChild(this.rtf);\n        this.rtf = div;\n      } else {\n        if (!this.rtf) this.rtf = div;\n        else this.rtf.appendChild(div);\n      }\n      div.innerHTML = this._handleHtml(html, append);\n      for (\n        var styles = this.rtf.getElementsByTagName(\"style\"), i = 0, style;\n        (style = styles[i++]);\n\n      ) {\n        style.innerHTML = style.innerHTML.replace(/body/g, \"#rtf\" + this._uid);\n        style.setAttribute(\"scoped\", \"true\");\n      }\n      // 懒加载\n      if (!this._observer && this.lazyLoad && IntersectionObserver) {\n        this._observer = new IntersectionObserver(\n          (changes) => {\n            for (let item, i = 0; (item = changes[i++]); ) {\n              if (item.isIntersecting) {\n                item.target.src = item.target.getAttribute(\"data-src\");\n                item.target.removeAttribute(\"data-src\");\n                this._observer.unobserve(item.target);\n              }\n            }\n          },\n          {\n            rootMargin: \"500px 0px 500px 0px\",\n          }\n        );\n      }\n      var _ts = this;\n      // 获取标题\n      var title = this.rtf.getElementsByTagName(\"title\");\n      if (title.length && this.autosetTitle)\n        uni.setNavigationBarTitle({\n          title: title[0].innerText,\n        });\n      // 图片处理\n      this.imgList.length = 0;\n      var imgs = this.rtf.getElementsByTagName(\"img\");\n      for (let i = 0, j = 0, img; (img = imgs[i]); i++) {\n        var src = img.getAttribute(\"src\");\n        if (this.domain && src) {\n          if (src[0] == \"/\") {\n            if (src[1] == \"/\")\n              img.src =\n                (this.domain.includes(\"://\")\n                  ? this.domain.split(\"://\")[0]\n                  : \"\") +\n                \":\" +\n                src;\n            else img.src = this.domain + src;\n          } else if (!src.includes(\"://\")) img.src = this.domain + \"/\" + src;\n        }\n        if (!img.hasAttribute(\"ignore\") && img.parentElement.nodeName != \"A\") {\n          img.i = j++;\n          _ts.imgList.push(img.src || img.getAttribute(\"data-src\"));\n          img.onclick = function () {\n            var preview = true;\n            this.ignore = () => (preview = false);\n            _ts.$emit(\"imgtap\", this);\n            if (preview) {\n              uni.previewImage({\n                current: this.i,\n                urls: _ts.imgList,\n              });\n            }\n          };\n        }\n        img.onerror = function () {\n          if (cfg.errorImg) _ts.imgList[this.i] = this.src = cfg.errorImg;\n          _ts.$emit(\"error\", {\n            source: \"img\",\n            target: this,\n          });\n        };\n        if (_ts.lazyLoad && this._observer && img.src && img.i != 0) {\n          img.setAttribute(\"data-src\", img.src);\n          img.removeAttribute(\"src\");\n          this._observer.observe(img);\n        }\n      }\n      // 链接处理\n      var links = this.rtf.getElementsByTagName(\"a\");\n      for (var link of links) {\n        link.onclick = function () {\n          var jump = true,\n            href = this.getAttribute(\"href\");\n          _ts.$emit(\"linkpress\", {\n            href,\n            ignore: () => (jump = false),\n          });\n          if (jump && href) {\n            if (href[0] == \"#\") {\n              if (_ts.useAnchor) {\n                _ts.navigateTo({\n                  id: href.substr(1),\n                });\n              }\n            } else if (href.indexOf(\"http\") == 0 || href.indexOf(\"//\") == 0)\n              return true;\n            else\n              uni.navigateTo({\n                url: href,\n              });\n          }\n          return false;\n        };\n      }\n      // 视频处理\n      var videos = this.rtf.getElementsByTagName(\"video\");\n      _ts.videoContexts = videos;\n      for (let video, i = 0; (video = videos[i++]); ) {\n        video.style.maxWidth = \"100%\";\n        video.onerror = function () {\n          _ts.$emit(\"error\", {\n            source: \"video\",\n            target: this,\n          });\n        };\n        video.onplay = function () {\n          if (_ts.autopause)\n            for (let item, i = 0; (item = _ts.videoContexts[i++]); )\n              if (item != this) item.pause();\n        };\n      }\n      // 音频处理\n      var audios = this.rtf.getElementsByTagName(\"audio\");\n      for (var audio of audios)\n        audio.onerror = function () {\n          _ts.$emit(\"error\", {\n            source: \"audio\",\n            target: this,\n          });\n        };\n      // 表格处理\n      if (this.autoscroll) {\n        var tables = this.rtf.getElementsByTagName(\"table\");\n        for (var table of tables) {\n          let div = document.createElement(\"div\");\n          div.style.overflow = \"scroll\";\n          table.parentNode.replaceChild(div, table);\n          div.appendChild(table);\n        }\n      }\n      if (!append) this.document.appendChild(this.rtf);\n      this.$nextTick(() => {\n        this.nodes = [1];\n        this.$emit(\"load\");\n      });\n      setTimeout(() => (this.showAm = \"\"), 500);\n      // #endif\n      // #ifndef APP-PLUS-NVUE\n      // #ifndef H5 || MP-360\n      var nodes;\n      if (!html) return (this.nodes = []);\n      var parser = new Parser(html, this);\n      // 缓存读取\n      if (this.useCache) {\n        var hashVal = hash(html);\n        if (cache[hashVal]) nodes = cache[hashVal];\n        else {\n          nodes = parser.parse();\n          cache[hashVal] = nodes;\n        }\n      } else nodes = parser.parse();\n      this.$emit(\"parse\", nodes);\n      if (append) this.nodes = this.nodes.concat(nodes);\n      else this.nodes = nodes;\n      if (nodes.length && nodes.title && this.autosetTitle)\n        uni.setNavigationBarTitle({\n          title: nodes.title,\n        });\n      if (this.imgList) this.imgList.length = 0;\n      this.videoContexts = [];\n      this.$nextTick(() => {\n        (function f(cs) {\n          for (var i = cs.length; i--; ) {\n            if (cs[i].top) {\n              cs[i].controls = [];\n              cs[i].init();\n              f(cs[i].$children);\n            }\n          }\n        })(this.$children);\n        this.$emit(\"load\");\n      });\n      // #endif\n      var height;\n      clearInterval(this._timer);\n      this._timer = setInterval(() => {\n        // #ifdef H5 || MP-360\n        this.rect = this.rtf.getBoundingClientRect();\n        // #endif\n        // #ifndef H5 || MP-360\n        uni\n          .createSelectorQuery()\n          .in(this)\n          .select(\"#_top\")\n          .boundingClientRect()\n          .exec((res) => {\n            if (!res) return;\n            this.rect = res[0];\n            // #endif\n            if (this.rect.height == height) {\n              this.$emit(\"ready\", this.rect);\n              clearInterval(this._timer);\n            }\n            height = this.rect.height;\n            // #ifndef H5 || MP-360\n          });\n        // #endif\n      }, 350);\n      if (this.showWithAnimation && !append)\n        this.showAm = \"animation:_show .5s\";\n      // #endif\n    },\n    // 获取文本内容\n    getText(ns = this.nodes) {\n      var txt = \"\";\n      // #ifdef APP-PLUS-NVUE\n      txt = this._text;\n      // #endif\n      // #ifdef H5 || MP-360\n      txt = this.rtf.innerText;\n      // #endif\n      // #ifndef H5 || APP-PLUS-NVUE || MP-360\n      for (var i = 0, n; (n = ns[i++]); ) {\n        if (n.type == \"text\")\n          txt += n.text\n            .replace(/&nbsp;/g, \"\\u00A0\")\n            .replace(/&lt;/g, \"<\")\n            .replace(/&gt;/g, \">\")\n            .replace(/&amp;/g, \"&\");\n        else if (n.type == \"br\") txt += \"\\n\";\n        else {\n          // 块级标签前后加换行\n          var block =\n            n.name == \"p\" ||\n            n.name == \"div\" ||\n            n.name == \"tr\" ||\n            n.name == \"li\" ||\n            (n.name[0] == \"h\" && n.name[1] > \"0\" && n.name[1] < \"7\");\n          if (block && txt && txt[txt.length - 1] != \"\\n\") txt += \"\\n\";\n          if (n.children) txt += this.getText(n.children);\n          if (block && txt[txt.length - 1] != \"\\n\") txt += \"\\n\";\n          else if (n.name == \"td\" || n.name == \"th\") txt += \"\\t\";\n        }\n      }\n      // #endif\n      return txt;\n    },\n    // 锚点跳转\n    in(obj) {\n      if (obj.page && obj.selector && obj.scrollTop) this._in = obj;\n    },\n    navigateTo(obj) {\n      if (!this.useAnchor) return obj.fail && obj.fail(\"Anchor is disabled\");\n      // #ifdef APP-PLUS-NVUE\n      if (!obj.id) weexDom.scrollToElement(this.$refs.web);\n      else\n        this.$refs.web.evalJs(\n          'var pos=document.getElementById(\"' +\n            obj.id +\n            '\");if(pos)post({action:\"linkpress\",href:\"#\",offset:pos.offsetTop+' +\n            (obj.offset || 0) +\n            \"})\"\n        );\n      obj.success && obj.success();\n      // #endif\n      // #ifndef APP-PLUS-NVUE\n      var d = \" \";\n      // #ifdef MP-WEIXIN || MP-QQ || MP-TOUTIAO\n      d = \">>>\";\n      // #endif\n      var selector = uni\n        .createSelectorQuery()\n        .in(this._in ? this._in.page : this)\n        .select(\n          (this._in ? this._in.selector : \"#_top\") +\n            (obj.id\n              ? `${d}#${obj.id},${this._in ? this._in.selector : \"#_top\"}${d}.${\n                  obj.id\n                }`\n              : \"\")\n        )\n        .boundingClientRect();\n      if (this._in)\n        selector\n          .select(this._in.selector)\n          .scrollOffset()\n          .select(this._in.selector)\n          .boundingClientRect();\n      else selector.selectViewport().scrollOffset();\n      selector.exec((res) => {\n        if (!res[0]) return obj.fail && obj.fail(\"Label not found\");\n        var scrollTop =\n          res[1].scrollTop +\n          res[0].top -\n          (res[2] ? res[2].top : 0) +\n          (obj.offset || 0);\n        if (this._in) this._in.page[this._in.scrollTop] = scrollTop;\n        else\n          uni.pageScrollTo({\n            scrollTop,\n            duration: 300,\n          });\n        obj.success && obj.success();\n      });\n      // #endif\n    },\n    // 获取视频对象\n    getVideoContext(id) {\n      // #ifndef APP-PLUS-NVUE\n      if (!id) return this.videoContexts;\n      else\n        for (var i = this.videoContexts.length; i--; )\n          if (this.videoContexts[i].id == id) return this.videoContexts[i];\n      // #endif\n    },\n    // #ifdef H5 || APP-PLUS-NVUE || MP-360\n    _handleHtml(html, append) {\n      if (!append) {\n        // 处理 tag-style 和 userAgentStyles\n        var style =\n          \"<style>@keyframes _show{0%{opacity:0}100%{opacity:1}}img{max-width:100%}\";\n        for (var item in cfg.userAgentStyles)\n          style += `${item}{${cfg.userAgentStyles[item]}}`;\n        for (item in this.tagStyle) style += `${item}{${this.tagStyle[item]}}`;\n        style += \"</style>\";\n        html = style + html;\n      }\n      // 处理 rpx\n      if (html.includes(\"rpx\"))\n        html = html.replace(\n          /[0-9.]+\\s*rpx/g,\n          ($) => parseFloat($) * rpx + \"px\"\n        );\n      return html;\n    },\n    // #endif\n    // #ifdef APP-PLUS-NVUE\n    _message(e) {\n      // 接收 web-view 消息\n      var d = e.detail.data[0];\n      switch (d.action) {\n        case \"load\":\n          this.$emit(\"load\");\n          this.height = d.height;\n          this._text = d.text;\n          break;\n        case \"getTitle\":\n          if (this.autosetTitle)\n            uni.setNavigationBarTitle({\n              title: d.title,\n            });\n          break;\n        case \"getImgList\":\n          this.imgList.length = 0;\n          for (var i = d.imgList.length; i--; )\n            this.imgList.setItem(i, d.imgList[i]);\n          break;\n        case \"preview\":\n          var preview = true;\n          d.img.ignore = () => (preview = false);\n          this.$emit(\"imgtap\", d.img);\n          if (preview)\n            uni.previewImage({\n              current: d.img.i,\n              urls: this.imgList,\n            });\n          break;\n        case \"linkpress\":\n          var jump = true,\n            href = d.href;\n          this.$emit(\"linkpress\", {\n            href,\n            ignore: () => (jump = false),\n          });\n          if (jump && href) {\n            if (href[0] == \"#\") {\n              if (this.useAnchor)\n                weexDom.scrollToElement(this.$refs.web, {\n                  offset: d.offset,\n                });\n            } else if (href.includes(\"://\")) plus.runtime.openWeb(href);\n            else\n              uni.navigateTo({\n                url: href,\n              });\n          }\n          break;\n        case \"error\":\n          if (d.source == \"img\" && cfg.errorImg)\n            this.imgList.setItem(d.target.i, cfg.errorImg);\n          this.$emit(\"error\", {\n            source: d.source,\n            target: d.target,\n          });\n          break;\n        case \"ready\":\n          uni\n            .createSelectorQuery()\n            .in(this)\n            .select(\"#_top\")\n            .boundingClientRect()\n            .exec((res) => {\n              this.rect = res[0];\n              this.$emit(\"ready\", res[0]);\n            });\n          break;\n        case \"height\":\n          this.height = d.height;\n          break;\n        case \"click\":\n          this.$emit(\"click\");\n          this.$emit(\"tap\");\n      }\n    },\n    // #endif\n  },\n};\n</script>\n\n<style>\n@keyframes _show {\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n/* #ifdef MP-WEIXIN */\n:host {\n  display: block;\n  overflow: scroll;\n  -webkit-overflow-scrolling: touch;\n}\n\n/* #endif */\n</style>\n","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./jyf-parser.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./jyf-parser.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1607929981365\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}